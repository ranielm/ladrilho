@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --tile-blue: #1e40af;
  --tile-yellow: #d97706;
  --tile-red: #dc2626;
  --tile-black: #374151;
  --tile-white: #ffffff;
}

body {
  @apply min-h-screen text-white;
  font-family: 'Inter', system-ui, -apple-system, sans-serif;
  background: radial-gradient(ellipse at center, #1e293b 0%, #0f172a 50%, #020617 100%);
  transition: background 0.3s ease, color 0.3s ease;
}

html:not(.dark) body {
  @apply text-slate-900;
  background: #f1f5f9;
  /* Light mode: slate-100 */
}

/* Landing Page Styles */
.landing-background {
  background: radial-gradient(ellipse at center, #1e293b 0%, #0f172a 50%, #020617 100%);
  position: relative;
}

html:not(.dark) .landing-background {
  background: #f1f5f9;
  /* Light mode: slate-100 */
}

.landing-background::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: radial-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px);
  background-size: 24px 24px;
  pointer-events: none;
}

html:not(.dark) .landing-background::before {
  background-image: radial-gradient(rgba(0, 0, 0, 0.03) 1px, transparent 1px);
}

.glass-card {
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

html:not(.dark) .glass-card {
  background: rgba(255, 255, 255, 0.9);
  border: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.text-tile-white {
  color: #E8F1F2;
}

.landing-btn-primary {
  background: linear-gradient(145deg, #0080CC 0%, #005A99 100%);
  border-bottom: 3px solid #004A7C;
  box-shadow: 0 4px 12px rgba(0, 109, 178, 0.3);
}

.landing-btn-primary:hover {
  background: linear-gradient(145deg, #0090DD 0%, #006DB2 100%);
}

.landing-btn-secondary {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: #E8F1F2;
}

.landing-btn-secondary:hover {
  border-color: rgba(255, 255, 255, 0.4);
}

.tile {
  @apply w-8 h-8 rounded-sm shadow-md transition-transform duration-200 cursor-pointer;
}

.tile:hover {
  @apply transform scale-110;
}

/* Resin/Glossy Effect */
/* Azulejos Portugueses Autênticos - Texturas Elaboradas */
.tile-blue {
  background: linear-gradient(145deg, #1e40af 0%, #1e3a8a 100%);
  position: relative;
  box-shadow: 0 4px 12px rgba(30, 64, 175, 0.4), inset 0 2px 4px rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(30, 58, 138, 0.8);
}

.tile-blue::before {
  content: '';
  position: absolute;
  inset: 2px;
  background-image:
    /* Floco central grande */
    radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.9) 2px, transparent 3px),
    /* Pétalas do floco */
    conic-gradient(from 0deg at 50% 50%,
      transparent 0deg, rgba(255, 255, 255, 0.7) 15deg, transparent 30deg,
      transparent 60deg, rgba(255, 255, 255, 0.7) 75deg, transparent 90deg,
      transparent 120deg, rgba(255, 255, 255, 0.7) 135deg, transparent 150deg,
      transparent 180deg, rgba(255, 255, 255, 0.7) 195deg, transparent 210deg,
      transparent 240deg, rgba(255, 255, 255, 0.7) 255deg, transparent 270deg,
      transparent 300deg, rgba(255, 255, 255, 0.7) 315deg, transparent 330deg),
    /* Pontos decorativos nos cantos */
    radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.6) 1px, transparent 2px),
    radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.6) 1px, transparent 2px),
    radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.6) 1px, transparent 2px),
    radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.6) 1px, transparent 2px);
  background-size: 100% 100%;
  border-radius: inherit;
  pointer-events: none;
}

.tile-yellow {
  background: linear-gradient(145deg, #d97706 0%, #b45309 100%);
  position: relative;
  box-shadow: 0 4px 12px rgba(217, 119, 6, 0.4), inset 0 2px 4px rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(180, 83, 9, 0.8);
}

.tile-yellow::before {
  content: '';
  position: absolute;
  inset: 2px;
  background-image:
    /* Padrão de losangos */
    repeating-conic-gradient(from 45deg at 50% 50%,
      rgba(0, 0, 0, 0.3) 0deg, rgba(0, 0, 0, 0.3) 45deg,
      transparent 45deg, transparent 90deg),
    /* Linhas cruzadas */
    repeating-linear-gradient(45deg,
      transparent 0px, transparent 3px,
      rgba(0, 0, 0, 0.2) 3px, rgba(0, 0, 0, 0.2) 4px,
      transparent 4px, transparent 8px),
    repeating-linear-gradient(-45deg,
      transparent 0px, transparent 3px,
      rgba(0, 0, 0, 0.2) 3px, rgba(0, 0, 0, 0.2) 4px,
      transparent 4px, transparent 8px),
    /* Pontos centrais */
    radial-gradient(circle at 50% 50%, rgba(0, 0, 0, 0.4) 1px, transparent 2px);
  background-size: 16px 16px, 8px 8px, 8px 8px, 100% 100%;
  border-radius: inherit;
  pointer-events: none;
}

.tile-red {
  background: linear-gradient(145deg, #dc2626 0%, #991b1b 100%);
  position: relative;
  box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4), inset 0 2px 4px rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(153, 27, 27, 0.8);
}

.tile-red::before {
  content: '';
  position: absolute;
  inset: 2px;
  background-image:
    /* Brilho cerâmico sutil */
    radial-gradient(ellipse at 30% 30%, rgba(255, 255, 255, 0.3) 0%, transparent 50%),
    /* Textura de cerâmica */
    repeating-linear-gradient(90deg,
      transparent 0px, rgba(255, 255, 255, 0.05) 1px, transparent 2px);
  border-radius: inherit;
  pointer-events: none;
}

.tile-black {
  background: linear-gradient(145deg, #374151 0%, #111827 100%);
  position: relative;
  box-shadow: 0 4px 12px rgba(17, 24, 39, 0.6), inset 0 2px 4px rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(17, 24, 39, 0.9);
}

.tile-black::before {
  content: '';
  position: absolute;
  inset: 2px;
  background-image:
    /* Padrão geométrico complexo */
    repeating-linear-gradient(0deg,
      rgba(255, 255, 255, 0.15) 0px, rgba(255, 255, 255, 0.15) 1px,
      transparent 1px, transparent 6px),
    repeating-linear-gradient(90deg,
      rgba(255, 255, 255, 0.15) 0px, rgba(255, 255, 255, 0.15) 1px,
      transparent 1px, transparent 6px),
    repeating-linear-gradient(45deg,
      rgba(255, 255, 255, 0.08) 0px, rgba(255, 255, 255, 0.08) 1px,
      transparent 1px, transparent 8px),
    repeating-linear-gradient(-45deg,
      rgba(255, 255, 255, 0.08) 0px, rgba(255, 255, 255, 0.08) 1px,
      transparent 1px, transparent 8px),
    /* Pontos de intersecção */
    radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.2) 0.5px, transparent 1px),
    radial-gradient(circle at 75% 25%, rgba(255, 255, 255, 0.2) 0.5px, transparent 1px),
    radial-gradient(circle at 25% 75%, rgba(255, 255, 255, 0.2) 0.5px, transparent 1px),
    radial-gradient(circle at 75% 75%, rgba(255, 255, 255, 0.2) 0.5px, transparent 1px);
  background-size: 100% 100%;
  border-radius: inherit;
  pointer-events: none;
}

.tile-white {
  background: linear-gradient(145deg, #ffffff 0%, #f1f5f9 100%);
  position: relative;
  box-shadow: 0 4px 12px rgba(148, 163, 184, 0.3), inset 0 2px 4px rgba(59, 130, 246, 0.1);
  border: 2px solid rgba(59, 130, 246, 0.3);
}

.tile-white::before {
  content: '';
  position: absolute;
  inset: 3px;
  background-image:
    /* Floco central azul */
    radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.8) 2px, transparent 3px),
    /* Pétalas do floco em azul */
    conic-gradient(from 0deg at 50% 50%,
      transparent 0deg, rgba(59, 130, 246, 0.6) 15deg, transparent 30deg,
      transparent 60deg, rgba(59, 130, 246, 0.6) 75deg, transparent 90deg,
      transparent 120deg, rgba(59, 130, 246, 0.6) 135deg, transparent 150deg,
      transparent 180deg, rgba(59, 130, 246, 0.6) 195deg, transparent 210deg,
      transparent 240deg, rgba(59, 130, 246, 0.6) 255deg, transparent 270deg,
      transparent 300deg, rgba(59, 130, 246, 0.6) 315deg, transparent 330deg),
    /* Ornamentos nos cantos */
    radial-gradient(circle at 15% 15%, rgba(59, 130, 246, 0.5) 1px, transparent 2px),
    radial-gradient(circle at 85% 15%, rgba(59, 130, 246, 0.5) 1px, transparent 2px),
    radial-gradient(circle at 15% 85%, rgba(59, 130, 246, 0.5) 1px, transparent 2px),
    radial-gradient(circle at 85% 85%, rgba(59, 130, 246, 0.5) 1px, transparent 2px),
    /* Linhas decorativas sutis */
    repeating-linear-gradient(45deg,
      transparent 0px, rgba(59, 130, 246, 0.1) 8px, transparent 10px);
  background-size: 100% 100%;
  border-radius: inherit;
  pointer-events: none;
}

.tile-first-player {
  background: linear-gradient(145deg, #0891b2 0%, #0e7490 100%);
  position: relative;
  color: white;
  box-shadow: 0 4px 12px rgba(8, 145, 178, 0.4), inset 0 2px 4px rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(14, 116, 144, 0.8);
}

.tile-first-player::before {
  content: '';
  position: absolute;
  inset: 2px;
  background-image:
    /* Padrão radiante */
    conic-gradient(from 0deg at 50% 50%,
      rgba(255, 255, 255, 0.3) 0deg, transparent 45deg,
      rgba(255, 255, 255, 0.3) 90deg, transparent 135deg,
      rgba(255, 255, 255, 0.3) 180deg, transparent 225deg,
      rgba(255, 255, 255, 0.3) 270deg, transparent 315deg),
    /* Círculos concêntricos */
    radial-gradient(circle at 50% 50%,
      transparent 30%, rgba(255, 255, 255, 0.2) 35%,
      transparent 40%, rgba(255, 255, 255, 0.1) 60%, transparent 65%);
  background-size: 100% 100%;
  border-radius: inherit;
  pointer-events: none;
  z-index: -1;
}

/* Peças não completadas na parede - estilo diferente das linhas de padrão */
.tile-empty {
  border: 2px dashed rgba(100, 116, 139, 0.6) !important;
  opacity: 0.4;
  box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.4) !important;
  filter: grayscale(0.3);
}

/* Peças completadas - destaque sutil mas visível */
.tile-completed {
  box-shadow: 0 0 6px rgba(255, 255, 255, 0.12), 0 2px 4px rgba(0, 0, 0, 0.25);
  border: 1px solid rgba(255, 255, 255, 0.15);
  filter: brightness(1.05);
}

/* Wall slots - watermark style with same patterns but muted */
.tile-slot {
  box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.5) !important;
  filter: brightness(0.6) saturate(0.7);
}

.factory {
  @apply bg-gray-200 dark:bg-slate-700 rounded-lg p-3 shadow-lg grid grid-cols-2 gap-2;
}

.pattern-line {
  @apply flex justify-end gap-1;
}

/* Board alignment styles for perfect pattern line and wall alignment */
.board-layout {
  @apply flex flex-col;
}

.pattern-lines-container,
.wall-container {
  @apply flex flex-col gap-1;
}

/* Ensure pattern lines and wall rows have identical heights */
.pattern-line,
.wall-row {
  height: 28px;
  @apply flex items-center;
}

.pattern-line {
  @apply justify-end gap-1 px-2;
}

.wall-row {
  @apply justify-start gap-1;
}

.wall-cell {
  @apply w-8 h-8 rounded-sm bg-gray-300 dark:bg-slate-800/50;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
}

.dark .wall-cell {
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
}

.wall-cell.filled {
  box-shadow: none;
}

.wall-cell.empty {
  @apply opacity-25;
}

.floor-line {
  @apply flex gap-1 p-2 bg-gray-200 dark:bg-slate-700 rounded;
}

.player-board {
  @apply bg-white dark:bg-slate-800 rounded-xl p-4 shadow-xl border border-gray-200 dark:border-transparent;
}

.current-turn {
  @apply ring-4 ring-yellow-400 ring-opacity-75;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-slate-800;
}

::-webkit-scrollbar-thumb {
  @apply bg-slate-600 rounded;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-slate-500;
}

/* ============================================
   MOBILE-FIRST RESPONSIVE STYLES
   ============================================ */

/* Mobile: Stack everything vertically */
@media (max-width: 767px) {

  /* Increase touch targets for tiles */
  .tile {
    @apply w-10 h-10;
    min-width: 40px;
    min-height: 40px;
  }

  .tile-sm {
    @apply w-8 h-8;
    min-width: 32px;
    min-height: 32px;
  }

  /* Larger factory grid for touch */
  .factory {
    @apply p-4 gap-3;
  }

  /* Player board mobile optimization */
  .player-board {
    @apply p-3;
  }

  /* Wall cells larger for touch */
  .wall-cell {
    @apply w-10 h-10;
  }

  /* Floor line touch-friendly */
  .floor-line {
    @apply gap-2 p-3;
  }

  /* Pattern lines touch-friendly */
  .pattern-line {
    @apply gap-2;
  }

  /* Glass card mobile padding */
  .glass-card {
    @apply px-5 py-6;
  }

  /* Buttons larger for touch */
  .landing-btn-primary,
  .landing-btn-secondary {
    @apply py-4 text-base;
    min-height: 52px;
  }

  /* Hide decorative tiles on very small screens */
  .landing-background>.absolute.pointer-events-none {
    display: none;
  }
}

/* Mobile landscape and small tablets */
@media (min-width: 480px) and (max-width: 767px) {
  .tile {
    @apply w-9 h-9;
  }

  .wall-cell {
    @apply w-9 h-9;
  }
}

/* Tablet portrait */
@media (min-width: 768px) and (max-width: 1023px) {
  .tile {
    @apply w-8 h-8;
  }

  .wall-cell {
    @apply w-8 h-8;
  }
}

/* Safe area insets for notched phones */
@supports (padding: max(0px)) {
  body {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
    padding-bottom: max(0px, env(safe-area-inset-bottom));
  }
}

/* Prevent text selection on game elements */
.tile,
.wall-cell,
.factory,
.pattern-line,
.floor-line,
.player-board {
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

/* Active states for touch feedback */
@media (hover: none) {
  .tile:active {
    transform: scale(0.95);
  }

  .landing-btn-primary:active,
  .landing-btn-secondary:active {
    transform: translateY(2px);
  }
}